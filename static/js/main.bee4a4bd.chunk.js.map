{"version":3,"sources":["components/Modal/Modal.module.css","components/GalleryItem/GalleryItem.module.css","components/Button/Button.module.css","components/Gallery/Gallery.module.css","services/imgApi.js","components/Button/Button.jsx","components/GalleryItem/GalleryItem.jsx","components/Gallery/Gallery.jsx","components/Modal/Modal.jsx","components/SearchBar/SearchBar.jsx","App.js","index.js","components/SearchBar/SearchBar.module.css"],"names":["module","exports","fetchImages","searchQuery","page","searchParams","URLSearchParams","q","per_page","key","fetch","then","response","ok","json","Promise","reject","Error","Button","onClick","className","st","btn","type","GalleryItem","src","alt","largeImageURL","item","image","data-large-url","Gallery","this","props","imgList","gallery","map","index","webformatURL","Component","modalRoot","document","querySelector","Modal","state","isImageLoading","handleKeyDown","event","code","onClose","setState","handleBackdropClick","currentTarget","target","onImageLoad","window","addEventListener","removeEventListener","createPortal","Overlay","color","height","width","onLoad","children","SearchBar","initialValue","handleInputChange","value","toLowerCase","handleSubmit","preventDefault","onSubmit","trim","toast","error","bar","form","label","input","autoComplete","autoFocus","placeholder","onChange","Status","App","status","showModal","currentImgObj","largeUrl","handleFormSubmit","resetPage","handleBtnClick","nextQuery","fethProcess","data","hits","length","prevState","catch","message","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","handleGalleryClick","e","dataset","nodeName","prevProps","prevQuery","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bee4a4bd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__cW_wR\",\"image\":\"Modal_image__2ieRt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"GalleryItem_item__9gkez\",\"image\":\"GalleryItem_image__7FvEy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Button_btn__24EMS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__1twSn\"};","const API_KEY = '19823143-e5d054b038f568b2343c680be';\r\nconst BASE_URL =\r\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\r\n\r\nexport default function fetchImages(searchQuery, page) {\r\n  const searchParams = new URLSearchParams({\r\n    q: searchQuery,\r\n    page,\r\n    per_page: 12,\r\n    key: API_KEY,\r\n  });\r\n  return fetch(`${BASE_URL}${searchParams}`).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n\r\n    return Promise.reject(\r\n      new Error(`There are no images for your query: ${searchQuery}`),\r\n    );\r\n  });\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport st from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button\r\n      className={st.btn}\r\n      type=\"button\"\r\n      onClick={() => {\r\n        onClick();\r\n      }}\r\n    >\r\n      Load more...\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;","import PropTypes from 'prop-types';\r\nimport st from './GalleryItem.module.css';\r\n\r\nconst GalleryItem = ({ src, alt, largeImageURL }) => {\r\n  return (\r\n    <li className={st.item}>\r\n      <img\r\n        className={st.image}\r\n        src={src}\r\n        alt={alt}\r\n        data-large-url={largeImageURL}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nGalleryItem.propTypes = PropTypes.shape({\r\n  src: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  largeImageUrl: PropTypes.string,\r\n}).isRequired;\r\n\r\nexport default GalleryItem;","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport GalleryItem from '../GalleryItem/GalleryItem';\r\nimport st from './Gallery.module.css';\r\n\r\nclass Gallery extends Component {\r\n  static propTypes = PropTypes.shape({\r\n    imgList: PropTypes.array,\r\n    onClick: PropTypes.func,\r\n  }).isRequired;\r\n\r\n  render() {\r\n    const { onClick, imgList } = this.props;\r\n    return (\r\n      <ul onClick={onClick} className={st.gallery}>\r\n        {imgList.map(({ webformatURL, type, largeImageURL }, index) => (\r\n          <GalleryItem\r\n            key={index}\r\n            src={webformatURL}\r\n            alt={type}\r\n            largeImageURL={largeImageURL}\r\n          />\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Gallery;","import { createPortal } from 'react-dom';\r\nimport { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loader from 'react-loader-spinner';\r\nimport st from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  static propTypes = PropTypes.shape({\r\n    src: PropTypes.string,\r\n    alt: PropTypes.string,\r\n    onClose: PropTypes.func,\r\n    children: PropTypes.element,\r\n  }).isRequired;\r\n\r\n  state = {\r\n    isImageLoading: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = event => {\r\n    if (event.code === 'Escape') {\r\n      this.props.onClose();\r\n      this.setState({ isImageLoading: true });\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n      this.setState({ isImageLoading: true });\r\n    }\r\n  };\r\n\r\n  onImageLoad = () => {\r\n    this.setState({ isImageLoading: false });\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n    return createPortal (\r\n      <div className={st.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={st.Modal}>\r\n          {this.state.isImageLoading && (\r\n            <Loader type=\"ThreeDots\" color=\"red\" height={80} width={80} />\r\n          )}\r\n          <img\r\n            src={src}\r\n            alt={alt}\r\n            onLoad={this.onImageLoad}\r\n            className={st.image}\r\n          />\r\n          {this.props.children}\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport st from './SearchBar.module.css';\r\n\r\nclass SearchBar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n\r\n  state = {\r\n    initialValue: '',\r\n  };\r\n\r\n  handleInputChange = event => {\r\n    this.setState({ initialValue: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { initialValue } = this.state;\r\n    const { onSubmit } = this.props;\r\n\r\n    if (initialValue.trim() === '') {\r\n      toast.error('Please, enter your search');\r\n    }\r\n\r\n    onSubmit(initialValue.trim());\r\n    this.setState({ initialValue: '' });\r\n  };\r\n\r\n  render() {\r\n    const { initialValue } = this.state;\r\n    return (\r\n      <header className={st.bar}>\r\n        <form onSubmit={this.handleSubmit} className={st.form}>\r\n          <button type=\"submit\" className={st.btn}>\r\n            <span className={st.label}>Search</span>\r\n          </button>\r\n          <input\r\n            className={st.input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={initialValue}\r\n            onChange={this.handleInputChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;","import { Component } from 'react';\nimport fetchImages from './services/imgApi';\nimport Loader from 'react-loader-spinner';\nimport { ToastContainer, toast } from 'react-toastify';\nimport Button from './components/Button/Button';\nimport Gallery from './components/Gallery/Gallery';\nimport Modal from './components/Modal/Modal';\nimport SearchBar from './components/SearchBar/SearchBar';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n    page: 1,\n    imgList: [],\n    error: '',\n    status: Status.IDLE,\n    showModal: false,\n    currentImgObj: { largeUrl: '', alt: '' },\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.searchQuery;\n    const nextQuery = this.state.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      this.setState({ imgList: [], status: Status.PENDING });\n      this.fethProcess(nextQuery);\n    }\n  }\n\n  handleFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n    this.resetPage();\n  };\n\n  handleBtnClick = () => {\n    const nextQuery = this.state.searchQuery;\n    this.setState({ status: Status.PENDING });\n    this.fethProcess(nextQuery);\n  };\n\n  fethProcess = nextQuery => {\n    fetchImages(nextQuery, this.state.page)\n      .then(data => {\n        if (data.hits.length === 0) {\n          this.setState({ status: Status.IDLE });\n          return toast.error('There is nothing to show');\n        }\n        this.setState(prevState => ({\n          imgList: [...prevState.imgList, ...data.hits],\n          status: Status.RESOLVED,\n        }));\n      })\n      .catch(({ message }) =>\n        this.setState({ error: message, status: Status.REJECTED }),\n      )\n      .finally(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n        this.setState(prevState => ({ page: (prevState.page += 1) }));\n      });\n  };\n\n  resetPage = () => {\n    this.setState({ page: 1 });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  handleGalleryClick = e => {\n    const largeUrl = e.target.dataset.largeUrl;\n    const alt = e.target.alt;\n\n    if (e.target.nodeName === 'IMG') {\n      this.setState({ currentImgObj: { largeUrl, alt } });\n    }\n    this.toggleModal();\n  };\n\n  render() {\n    const { imgList, error, status, showModal, currentImgObj } = this.state;\n\n    return (\n      <>\n        <SearchBar onSubmit={this.handleFormSubmit} />\n        {error && <h1>{error}</h1>}\n        <Gallery imgList={imgList} onClick={this.handleGalleryClick} />\n        {showModal && (\n          <Modal\n            src={currentImgObj.largeUrl}\n            alt={currentImgObj.alt}\n            onClose={this.toggleModal}\n          ></Modal>\n        )}\n        <div className=\"container\">\n          {status === Status.PENDING && (\n            <Loader type=\"ThreeDots\" color=\"red\" height={80} width={80} />\n          )}\n          {status === Status.RESOLVED && (\n            <Button onClick={this.handleBtnClick} />\n          )}\n        </div>\n        <ToastContainer autoClose={2500} />\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport './base.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bar\":\"SearchBar_bar__2mGNq\",\"form\":\"SearchBar_form__3MLEJ\",\"btn\":\"SearchBar_btn__2fZxL\",\"label\":\"SearchBar_label__1t_Re\",\"input\":\"SearchBar_input__2Cwzp\"};"],"sourceRoot":""}